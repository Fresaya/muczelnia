<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mUczelnia - Pulpit</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="layout-wrapper">
        <!-- LEFT SIDEBAR -->
        <aside class="sidebar-left">
            <div class="top-section">
                <div class="brand-area"><a href="#" class="logo-text"><span>m</span>Uczelnia</a></div>
                <ul class="nav-menu">
                    <li class="nav-item"><a href="#" class="nav-link active"><span>Pulpit</span></a></li>
                </ul>
            </div>
        </aside>

        <!-- MAIN CONTENT -->
        <main class="main-content">
            <div class="welcome-header">
                <div>
                    <h1 id="welcome-message">Witaj!</h1>
                    <p>Wybierz moduł, aby kontynuować.</p>
                </div>
            </div>

            <!-- DASHBOARD GRID -->
            <div class="dashboard-grid">
                
                <!-- 1. ADMIN: UTWÓRZ KURS -->
                <a href="create_course.html" id="widget-create-course" class="widget-tile" style="display: none; border: 2px dashed var(--accent-color);">
                    <div class="widget-icon" style="background-image: url('data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 24 24%22 fill=%22none%22 stroke=%22%23f04a4a%22 stroke-width=%222%22 stroke-linecap=%22round%22 stroke-linejoin=%22round%22><rect x=%223%22 y=%223%22 width=%2218%22 height=%2218%22 rx=%222%22 ry=%222%22></rect><line x1=%2212%22 y1=%228%22 x2=%2212%22 y2=%2216%22></line><line x1=%228%22 y1=%2212%22 x2=%2216%22 y2=%2212%22></line></svg>');"></div>
                    <h3 style="color: var(--accent-color);">Utwórz Kurs</h3>
                    <p class="course-meta">Administrator</p>
                </a>
                
                <!-- 2. ADMIN & MANAGER: DODAJ UŻYTKOWNIKA -->
                <div id="widget-add-user" class="widget-tile" style="display: none; border: 2px dashed #555; cursor: pointer;">
                    <div class="widget-icon" style="background-image: url('data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 24 24%22 fill=%22none%22 stroke=%22%23555%22 stroke-width=%222%22 stroke-linecap=%22round%22 stroke-linejoin=%22round%22><path d=%22M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2%22></path><circle cx=%228.5%22 cy=%227%22 r=%224%22></circle><line x1=%2220%22 y1=%228%22 x2=%2220%22 y2=%2214%22></line><line x1=%2223%22 y1=%2211%22 x2=%2217%22 y2=%2211%22></line></svg>');"></div>
                    <h3 style="color: #555;">Dodaj Użytkownika</h3>
                    <p class="course-meta">Admin & Manager</p>
                </div>

                <!-- 3. ADMIN ONLY: DODAJ SZKOŁĘ -->
                <div id="widget-add-school" class="widget-tile" style="display: none; border: 2px dashed #2196F3; cursor: pointer;">
                    <div class="widget-icon" style="background-image: url('data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 24 24%22 fill=%22none%22 stroke=%22%232196F3%22 stroke-width=%222%22 stroke-linecap=%22round%22 stroke-linejoin=%22round%22><path d=%22M3 21h18M5 21V7l8-4 8 4v14M8 21v-4h8v4%22></path></svg>');"></div>
                    <h3 style="color: #2196F3;">Dodaj Szkołę</h3>
                    <p class="course-meta">Administrator</p>
                </div>

                <!-- 4. ADMIN & MANAGER: DODAJ KLASĘ -->
                <div id="widget-add-class" class="widget-tile" style="display: none; border: 2px dashed #4CAF50; cursor: pointer;">
                    <div class="widget-icon" style="background-image: url('data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 24 24%22 fill=%22none%22 stroke=%22%234CAF50%22 stroke-width=%222%22 stroke-linecap=%22round%22 stroke-linejoin=%22round%22><path d=%22M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2%22></path><circle cx=%229%22 cy=%227%22 r=%224%22></circle><path d=%22M23 21v-2a4 4 0 0 0-3-3.87%22></path><path d=%22M16 3.13a4 4 0 0 1 0 7.75%22></path></svg>');"></div>
                    <h3 style="color: #4CAF50;">Dodaj Klasę</h3>
                    <p class="course-meta">Admin & Manager</p>
                </div>

                <!-- 5. NEW: ZARZĄDZAJ UCZNIAMI (Admin & Manager) -->
                <div id="widget-manage-students" class="widget-tile" style="display: none; border: 2px dashed #FF9800; cursor: pointer;">
                    <div class="widget-icon" style="background-image: url('data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 24 24%22 fill=%22none%22 stroke=%22%23FF9800%22 stroke-width=%222%22 stroke-linecap=%22round%22 stroke-linejoin=%22round%22><path d=%22M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2%22></path><circle cx=%229%22 cy=%227%22 r=%224%22></circle><path d=%22M23 21v-2a4 4 0 0 0-3-3.87%22></path><path d=%22M16 3.13a4 4 0 0 1 0 7.75%22></path></svg>');"></div>
                    <h3 style="color: #FF9800;">Uczniowie</h3>
                    <p class="course-meta">Przypisz klasy</p>
                </div>

                <!-- STANDARD TILES -->
                <a href="courses_list.html" class="widget-tile">
                    <div class="widget-icon icon-course-active"></div>
                    <h3>Moje Kursy</h3>
                    <p class="course-meta">Przejdź do listy zajęć</p>
                </a>
            </div>
        </main>

        <!-- RIGHT SIDEBAR -->
        <aside class="sidebar-right">
            <div class="profile-card">
                <div class="avatar" id="avatarTrigger" title="Kliknij, aby otworzyć opcje"></div>
                <div class="dropdown-menu" id="profileDropdown">
                    <div class="dropdown-item" id="logoutBtn">
                        <div class="icon-logout"></div>
                        Wyloguj się
                    </div>
                </div>
                <h2 class="profile-name" id="profile-name-display">...</h2>
                <p class="profile-id" id="profile-role-display">...</p>
            </div>
        </aside>
    </div>

    <!-- ================= MODALS ================= -->

    <!-- 1. CREATE USER MODAL (CLASS REMOVED) -->
    <div class="modal-overlay" id="createUserModal">
        <div class="modal-window">
            <div class="modal-header">
                <h3 class="modal-title">Dodaj Użytkownika</h3>
                <span class="close-modal" onclick="closeModal('createUserModal')">&times;</span>
            </div>
            <form id="createUserForm" class="modal-form">
                <label>Nazwa</label>
                <input type="text" id="new-username" class="edit-input" required>
                <label>Email</label>
                <input type="email" id="new-email" class="edit-input" required>
                <label>Hasło</label>
                <input type="password" id="new-password" class="edit-input" required>
                
                <label>Rola</label>
                <select id="new-role" class="edit-input" style="border:1px solid #ccc; margin-bottom: 15px;">
                    <option value="student" selected>Student</option>
                    <option value="teacher">Nauczyciel</option>
                    <option value="manager">Dziekanat (Manager)</option>
                    <option value="admin">Administrator</option>
                </select>

                <!-- SCHOOL SELECT -->
                <div id="school-select-container" style="display: block;">
                    <label>Szkoła / Wydział</label>
                    <select id="new-user-school" class="edit-input" style="border:1px solid #ccc; margin-bottom: 15px;">
                        <option value="" selected>-- Brak / Ogólne --</option>
                    </select>
                </div>
                <!-- CLASS SELECT IS REMOVED FROM HERE -->

                <button type="submit" class="login-button full-width-btn" id="createBtn">Utwórz konto</button>
            </form>
        </div>
    </div>

    <!-- 2. ADD SCHOOL MODAL -->
    <div class="modal-overlay" id="addSchoolModal">
        <div class="modal-window">
            <div class="modal-header">
                <h3 class="modal-title">Dodaj Szkołę/Wydział</h3>
                <span class="close-modal" onclick="closeModal('addSchoolModal')">&times;</span>
            </div>
            <form id="addSchoolForm" class="modal-form">
                <label>Nazwa Szkoły</label>
                <input type="text" id="school-name" class="edit-input" placeholder="np. Wydział Informatyki" required>
                <label>Adres (Opcjonalnie)</label>
                <input type="text" id="school-address" class="edit-input" placeholder="ul. Słoneczna 5">
                <button type="submit" class="login-button full-width-btn">Zapisz Szkołę</button>
            </form>
        </div>
    </div>

    <!-- 3. ADD CLASS MODAL -->
    <div class="modal-overlay" id="addClassModal">
        <div class="modal-window">
            <div class="modal-header">
                <h3 class="modal-title">Dodaj Klasę/Grupę</h3>
                <span class="close-modal" onclick="closeModal('addClassModal')">&times;</span>
            </div>
            <form id="addClassForm" class="modal-form">
                <label>Wybierz Szkołę</label>
                <select id="class-school-select" class="edit-input" style="border:1px solid #ccc;" required>
                    <option value="" disabled selected>Ładowanie szkół...</option>
                </select>
                <label>Nazwa Klasy</label>
                <input type="text" id="class-name" class="edit-input" placeholder="np. 1A - Informatyka" required>
                <button type="submit" class="login-button full-width-btn">Zapisz Klasę</button>
            </form>
        </div>
    </div>

    <!-- 4. MANAGE STUDENTS MODAL (NEW) -->
    <div class="modal-overlay" id="manageStudentsModal">
        <div class="modal-window" style="max-width: 800px;">
            <div class="modal-header">
                <h3 class="modal-title">Zarządzanie Uczniami</h3>
                <span class="close-modal" onclick="closeModal('manageStudentsModal')">&times;</span>
            </div>
            
            <!-- School Filter (Only for Admin) -->
            <div id="manage-school-wrapper" style="margin-bottom: 20px;">
                <label>Wybierz szkołę, aby zobaczyć uczniów:</label>
                <select id="manage-school-select" class="edit-input" style="border:1px solid #ccc;">
                    <option value="" disabled selected>Wybierz...</option>
                </select>
            </div>

            <div id="students-loading" style="display:none; text-align:center;">Ładowanie listy...</div>
            
            <div id="students-table-container" style="max-height: 400px; overflow-y: auto; display: none;">
                <table class="student-table">
                    <thead>
                        <tr>
                            <th>Imię i Nazwisko</th>
                            <th>Email</th>
                            <th>Przypisana Klasa</th>
                            <th>Akcja</th>
                        </tr>
                    </thead>
                    <tbody id="students-table-body">
                        <!-- Rows injected via JS -->
                    </tbody>
                </table>
                <p id="no-students-msg" style="text-align:center; color:#888; display:none; padding:20px;">Brak studentów w tej szkole.</p>
            </div>
        </div>
    </div>


    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script>
        const supabaseUrl = 'https://xzbonbdtfgrhihwmiamq.supabase.co';
        const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh6Ym9uYmR0ZmdyaGlod21pYW1xIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQxNDYxMzAsImV4cCI6MjA3OTcyMjEzMH0.iqd1FO3kdgECw857Okf0CF_i570wcTk2VtJhJXSwlEg'; 
        
        const _supabase = supabase.createClient(supabaseUrl, supabaseKey);

        let currentUserRole = null;
        let currentUserSchoolId = null;

        document.addEventListener('DOMContentLoaded', async () => {
            // 1. Auth Check
            const { data: { session } } = await _supabase.auth.getSession();
            if (!session) { window.location.href = 'login.html'; return; }

            const userId = session.user.id;
            
            // 2. Fetch Profile
            const { data: profile } = await _supabase
                .from('users')
                .select('username, role, school_id')
                .eq('id', userId)
                .single();

            if (profile) {
                currentUserRole = profile.role;
                currentUserSchoolId = profile.school_id;

                document.getElementById('profile-name-display').textContent = profile.username;
                document.getElementById('profile-role-display').textContent = profile.role.toUpperCase();
                document.getElementById('welcome-message').textContent = `Witaj, ${profile.username}!`;

                // --- ROLE BASED VISIBILITY ---
                
                // ADMIN
                if (currentUserRole === 'admin') {
                    show('widget-create-course');
                    show('widget-add-user');
                    show('widget-add-school');
                    show('widget-add-class');
                    show('widget-manage-students');

                    // Bind Actions
                    document.getElementById('widget-add-user').onclick = () => openCreateUserModal();
                    document.getElementById('widget-add-school').onclick = () => openModal('addSchoolModal');
                    document.getElementById('widget-add-class').onclick = () => openClassModal();
                    document.getElementById('widget-manage-students').onclick = () => openManageStudentsModal();
                }

                // MANAGER
                if (currentUserRole === 'manager') {
                    show('widget-add-class');
                    show('widget-manage-students');
                    // NEW: Allow manager to add users
                    show('widget-add-user');

                    // Bind Actions
                    document.getElementById('widget-add-class').onclick = () => openClassModal();
                    document.getElementById('widget-manage-students').onclick = () => openManageStudentsModal();
                    // NEW: Bind add user for manager
                    document.getElementById('widget-add-user').onclick = () => openCreateUserModal();
                }
            }

            // Dropdown & Logout
            const avatarTrigger = document.getElementById('avatarTrigger');
            const dropdown = document.getElementById('profileDropdown');
            const logoutBtn = document.getElementById('logoutBtn');
            avatarTrigger.addEventListener('click', (e) => { e.stopPropagation(); dropdown.classList.toggle('show'); });
            window.addEventListener('click', () => { if (dropdown.classList.contains('show')) dropdown.classList.remove('show'); });
            logoutBtn.addEventListener('click', async () => { await _supabase.auth.signOut(); window.location.href = 'login.html'; });

            // --- FORM SUBMITS ---
            document.getElementById('createUserForm').addEventListener('submit', createNewUser);
            document.getElementById('addSchoolForm').addEventListener('submit', addSchool);
            document.getElementById('addClassForm').addEventListener('submit', addClass);

            // Create User - Toggle School visibility
            document.getElementById('new-role').addEventListener('change', function() {
                const role = this.value;
                const schoolContainer = document.getElementById('school-select-container');
                if (role === 'admin') schoolContainer.style.display = 'none';
                else schoolContainer.style.display = 'block';
            });

            // Student Manager - School Select Change
            document.getElementById('manage-school-select').addEventListener('change', function() {
                loadStudentsForSchool(this.value);
            });
        });

        // --- FUNCTIONS ---
        function show(id) { document.getElementById(id).style.display = 'flex'; }
        function openModal(id) { document.getElementById(id).classList.add('active'); }
        function closeModal(id) { document.getElementById(id).classList.remove('active'); }

        // 1. ADD SCHOOL
        async function addSchool(e) {
            e.preventDefault();
            const name = document.getElementById('school-name').value;
            const address = document.getElementById('school-address').value;
            const { error } = await _supabase.from('schools').insert({ name, address });
            if (error) alert("Błąd: " + error.message);
            else { alert("Szkoła dodana!"); closeModal('addSchoolModal'); document.getElementById('addSchoolForm').reset(); }
        }

        // 2. ADD CLASS
        async function addClass(e) {
            e.preventDefault();
            const schoolId = document.getElementById('class-school-select').value;
            const name = document.getElementById('class-name').value;
            if (!schoolId) return alert("Wybierz szkołę!");
            const { error } = await _supabase.from('classes').insert({ school_id: schoolId, name });
            if (error) alert("Błąd: " + error.message);
            else { alert("Klasa dodana!"); closeModal('addClassModal'); document.getElementById('addClassForm').reset(); }
        }

        // 3. CREATE USER (UPDATED - No Class, Role Restricted)
        async function openCreateUserModal() {
            openModal('createUserModal');
            const schoolSelect = document.getElementById('new-user-school');
            const roleSelect = document.getElementById('new-role');
            
            // ROLE FILTERING FOR MANAGER
            if (currentUserRole === 'manager') {
                Array.from(roleSelect.options).forEach(opt => {
                    // Hide Admin and Manager options for Manager users
                    if (opt.value === 'admin' || opt.value === 'manager') {
                        opt.style.display = 'none';
                        opt.disabled = true;
                    } else {
                        opt.style.display = '';
                        opt.disabled = false;
                    }
                });
                // Default to student if current value is hidden
                if (roleSelect.value === 'admin' || roleSelect.value === 'manager') {
                    roleSelect.value = 'student';
                    roleSelect.dispatchEvent(new Event('change')); // Trigger logic
                }
            } else {
                // Admin sees all
                Array.from(roleSelect.options).forEach(opt => {
                    opt.style.display = '';
                    opt.disabled = false;
                });
            }

            // FETCH SCHOOLS
            const { data: schools } = await _supabase.from('schools').select('id, name');
            
            schoolSelect.innerHTML = '<option value="" selected>-- Brak / Ogólne --</option>';
            if (schools) {
                schools.forEach(s => {
                    const opt = document.createElement('option');
                    opt.value = s.id;
                    opt.textContent = s.name;
                    schoolSelect.appendChild(opt);
                });
            }

            // Pre-select school if Manager has one
            if (currentUserRole === 'manager' && currentUserSchoolId) {
                schoolSelect.value = currentUserSchoolId;
                // Optional: disable changing school if manager is tied to one
                // schoolSelect.disabled = true; 
            }
        }

        async function createNewUser(e) {
            e.preventDefault();
            const btn = document.getElementById('createBtn');
            const originalText = btn.textContent;
            btn.textContent = "Tworzenie...";
            btn.disabled = true;

            const email = document.getElementById('new-email').value;
            const password = document.getElementById('new-password').value;
            const username = document.getElementById('new-username').value;
            const role = document.getElementById('new-role').value;
            const schoolId = document.getElementById('new-user-school').value;
            // No classId here anymore

            try {
                const tempSupabase = supabase.createClient(supabaseUrl, supabaseKey, {
                    auth: { persistSession: false, autoRefreshToken: false, detectSessionInUrl: false }
                });

                const { data: authData, error: authError } = await tempSupabase.auth.signUp({
                    email: email, password: password,
                    options: { 
                        data: { 
                            username: username, 
                            role: role,
                            school_id: schoolId || null, 
                            class_id: null // Explicitly null
                        } 
                    }
                });

                if (authError) throw authError;
                alert(`✅ Sukces! Utworzono użytkownika: ${username}`);
                closeModal('createUserModal');
                document.getElementById('createUserForm').reset();
            } catch (err) { alert("Błąd: " + err.message); } 
            finally { btn.textContent = originalText; btn.disabled = false; }
        }

        // 4. HELPERS FOR MODALS
        async function openClassModal() {
            openModal('addClassModal');
            const select = document.getElementById('class-school-select');
            
            // If Manager, auto-select school
            if (currentUserRole === 'manager' && currentUserSchoolId) {
                select.innerHTML = ''; // Clear
                const { data: school } = await _supabase.from('schools').select('id, name').eq('id', currentUserSchoolId).single();
                const opt = document.createElement('option');
                opt.value = school.id;
                opt.textContent = school.name;
                opt.selected = true;
                select.appendChild(opt);
                select.disabled = true; // Can't change school
                return;
            }

            // If Admin, load all
            if (currentUserRole === 'admin' && select.options.length <= 1) {
                const { data: schools } = await _supabase.from('schools').select('id, name');
                if (schools) {
                    select.innerHTML = '<option value="" disabled selected>-- Wybierz Szkołę --</option>';
                    schools.forEach(s => {
                        const opt = document.createElement('option');
                        opt.value = s.id;
                        opt.textContent = s.name;
                        select.appendChild(opt);
                    });
                }
            }
        }

        // 5. MANAGE STUDENTS LOGIC (NEW)
        async function openManageStudentsModal() {
            openModal('manageStudentsModal');
            const schoolSelect = document.getElementById('manage-school-select');
            const tableContainer = document.getElementById('students-table-container');
            const loading = document.getElementById('students-loading');

            // Reset UI
            tableContainer.style.display = 'none';
            document.getElementById('students-table-body').innerHTML = '';

            // If Manager: Auto-load their school
            if (currentUserRole === 'manager' && currentUserSchoolId) {
                schoolSelect.parentElement.style.display = 'none'; // Hide dropdown
                loadStudentsForSchool(currentUserSchoolId);
            } 
            // If Admin: Load school list
            else if (currentUserRole === 'admin') {
                schoolSelect.parentElement.style.display = 'block';
                schoolSelect.innerHTML = '<option value="" disabled selected>Ładowanie szkół...</option>';
                const { data: schools } = await _supabase.from('schools').select('id, name');
                schoolSelect.innerHTML = '<option value="" disabled selected>Wybierz...</option>';
                schools.forEach(s => {
                    const opt = document.createElement('option');
                    opt.value = s.id;
                    opt.textContent = s.name;
                    schoolSelect.appendChild(opt);
                });
            }
        }

        async function loadStudentsForSchool(schoolId) {
            if (!schoolId) return;
            const tableBody = document.getElementById('students-table-body');
            const container = document.getElementById('students-table-container');
            const msg = document.getElementById('no-students-msg');
            const loading = document.getElementById('students-loading');

            loading.style.display = 'block';
            container.style.display = 'none';
            msg.style.display = 'none';
            tableBody.innerHTML = '';

            // 1. Fetch Students
            const { data: students, error: sErr } = await _supabase
                .from('users')
                .select('id, username, email, class_id')
                .eq('school_id', schoolId)
                .eq('role', 'student');

            // 2. Fetch Classes for this school (for dropdowns)
            const { data: classes, error: cErr } = await _supabase
                .from('classes')
                .select('id, name')
                .eq('school_id', schoolId);

            loading.style.display = 'none';
            container.style.display = 'block';

            if (!students || students.length === 0) {
                msg.style.display = 'block';
                return;
            }

            // 3. Render Table
            students.forEach(student => {
                const tr = document.createElement('tr');
                
                // Name & Email
                const tdName = document.createElement('td');
                tdName.innerHTML = `<b>${student.username}</b>`;
                
                const tdEmail = document.createElement('td');
                tdEmail.textContent = student.email;

                // Class Selector
                const tdClass = document.createElement('td');
                const select = document.createElement('select');
                select.className = 'class-select-small';
                select.id = `class-select-${student.id}`;
                
                // Default option
                const defOpt = document.createElement('option');
                defOpt.value = "";
                defOpt.textContent = "-- Brak klasy --";
                if (!student.class_id) defOpt.selected = true;
                select.appendChild(defOpt);

                // Add classes
                if (classes) {
                    classes.forEach(c => {
                        const opt = document.createElement('option');
                        opt.value = c.id;
                        opt.textContent = c.name;
                        if (student.class_id === c.id) opt.selected = true;
                        select.appendChild(opt);
                    });
                }
                tdClass.appendChild(select);

                // Action Button
                const tdAction = document.createElement('td');
                const btn = document.createElement('button');
                btn.className = 'save-mini-btn';
                btn.textContent = 'Zapisz';
                btn.onclick = () => updateStudentClass(student.id, select.value, btn);
                tdAction.appendChild(btn);

                tr.appendChild(tdName);
                tr.appendChild(tdEmail);
                tr.appendChild(tdClass);
                tr.appendChild(tdAction);
                tableBody.appendChild(tr);
            });
        }

        async function updateStudentClass(userId, classId, btn) {
            const originalText = btn.textContent;
            btn.textContent = "...";
            btn.disabled = true;

            const finalClassId = classId ? parseInt(classId) : null;

            const { error } = await _supabase
                .from('users')
                .update({ class_id: finalClassId })
                .eq('id', userId);

            if (error) {
                alert("Błąd: " + error.message);
                btn.textContent = originalText;
            } else {
                btn.textContent = "✔ OK";
                btn.style.background = "green";
                setTimeout(() => {
                    btn.textContent = "Zapisz";
                    btn.style.background = "";
                    btn.disabled = false;
                }, 1500);
            }
        }
    </script>
</body>
</html>
